user  www www;
worker_processes  2;
error_log  /home/www/nginx_logs/error.log;
pid        logs/nginx.pid;
worker_rlimit_nofile 65535;
events {
    use epoll;
    worker_connections  65535;
}

http {
    #fastcgi_intercept_errors on;
    #error_page  404 ;
    include       mime.types;
    default_type  application/octet-stream;
	
	#whbmemo:配置访问日志格式
    log_format  main  ' 来访IP:[$remote_addr]时间：[$time_local] 页面：["$request"]状态:[$status] 数据量[$body_bytes_sent] 客户端信息["$http_user_agent" "$http_x_forwarded_for"] ';

    server_names_hash_bucket_size 128;
    client_header_buffer_size 32k;
    large_client_header_buffers 4 32k;
    client_max_body_size 300m;
    sendfile        on;
    tcp_nopush     on;
    fastcgi_connect_timeout 300;
    fastcgi_send_timeout 300;
    fastcgi_read_timeout 300;
    fastcgi_buffer_size 128k;
    fastcgi_buffers 2 256k;
    fastcgi_busy_buffers_size 256k;
    fastcgi_temp_file_write_size 256k;
    #keepalive_timeout  0;
    keepalive_timeout  60;
    tcp_nodelay on;
    server_tokens off;
    gzip  on;
    gzip_min_length  1k;
    gzip_buffers     4 16k;
    gzip_http_version 1.1;
    gzip_comp_level 2;
    gzip_types       text/plain application/x-javascript text/css application/xml;
    gzip_vary on;

	## whbmemo：配置虚拟主机 (gongyidianping.com)
	server
	{
		#server_name  zwty.longcity.net ;#如有多个，用空格分隔
		#include  rewrite.conf;	#提供对第三方PHP框架的重定向支持，暂时屏蔽
		#error_page  404    /404.html;	#个性化404错误页面
		#error_page  500 502 503 504  /50x.html; #个性化50x错误页面

		listen  80;
		root 	/home/www;
		index   index.html index.php;		
		server_tokens off;  #去除版本号暴漏		 
		access_log  /home/www/nginx_logs/www_access.log  main; #记录访问日志
		
		## whbmemo：以下配置请勿随意改动 ##
		location ~* .*\.php($|/){
			include  fastcgi.conf;
		}
		
		location ~ .*\.(gif|jpg|jpeg|png|bmp|swf)$
		{
		  expires      30d;
		}

		location ~ .*\.(js|css)?$
		{
		  expires      1h;
		}    		
	}

	server
	{
		#server_name  zwty.longcity.net ;#如有多个，用空格分隔
		#include  rewrite.conf;	#提供对第三方PHP框架的重定向支持，暂时屏蔽
		#error_page  404    /404.html;	#个性化404错误页面
		#error_page  500 502 503 504  /50x.html; #个性化50x错误页面

		listen  80;
		server_name  ywy.huiguannetwork.com;
		root 	/home/www/yewuyuan;
		index   index.html index.php;
		server_tokens off;  #去除版本号暴漏
		access_log  /home/www/nginx_logs/www_access.log  main; #记录访问日志
        ssl on;

        ssl_certificate      /usr/local/nginx/cert/214300477370566.pem;
        ssl_certificate_key  /usr/local/nginx/cert/214300477370566.key;

        ssl_session_timeout  5m;

        ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;
        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
        ssl_prefer_server_ciphers  on;

        location ^~/214300477370566 {
             proxy_redirect off;
             proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
             proxy_set_header X-Forwarded-Proto https;
             proxy_pass http://127.0.0.1:8080/214300477370566;
        }
	}

                #server_name  www.huiguannetwork.com;#如有多个，用空格分隔
    
	#include  vhost/*.conf; #whbmemo:虚拟主机配置方式，暂时屏蔽
}
